- The network layer provides a communication service between any two network hosts
- Datagrams travel over communication links (wired and wireless) through packet switches (switches and routers)
- 2 different types of link-layer channels
	- Broadcast channels
		- Connect multiple hosts in wireless LANs, satellite networks, and hybrid fiber-coaxial cable (HFC) access networks
	- Point-to-point communication
		- Between two routers connected by a long distance link or Ethernet switch


## Introduction to the Link Layer

- A node is any device that runs a link layer protocol
	- Hosts, routers, switches, and WiFi access points
- Links are communication channels that connect adjacent nodes

Datagram Travel
1. WiFi link
2. Ethernet link
3. Link between link-layer switch and router
4. Link between the access point and link-layer switch
5. Link between router and link-layer switch
6. Ethernet link between switch and server

- A transmitting node encapsulates the datagram in a link-layer frame and transmits the frame into the link

<img src="/images/Pasted image 20251227191007.png" alt="image" width="500">


### The Services Provided by the Link Layer

Services of a Link Layer Protocol
- Framing
	- A data field, in which the network layer datagram is inserted
	- A number of header fields
- Link access
	- Medium access control (MAC) protocol specifies in the rules by which a frame is transmitted onto the link
- Reliable delivery
- Error detection and correction

### Where Is the Link Layer Implemented?

- The link layer is implemented in the router's line card
- The link layer is implemented in a network adapter, also known as a network interface card (NIC)
	- Single purpose chip that implements link-layer services
	- Hardware
		- Intel's 710 adapter
		- Atheros AR5006
- Most NIC were separate cards the plug into the PCI slot
- Network adapters are now integrated onto the host's motherboard

<img src="/images/Pasted image 20251227191532.png" alt="image" width="500">

- Controller takes a datagram that has been created and stored in hot memory by the higher layers of the protocol stack, encapsulates the datagram in a link-layer frame, then transmits the frame into the communication link
- Most of the link layer is implemented in hardware using host's CPI


## Error-Detection and Correction Techniques

- Bit-level error detection and correction
	- Detecting and correcting the corruption of bits in a link-layer frame send from one node to another physically connected neighbouring node
	- Often offered at the transport layer


<img src="/images/Pasted image 20251227191808.png" alt="image" width="500">

- Node D is augmented with error-detection and correction bits (EDC)
- D and EDC are send to receiving node in link-level frame
- D' and EDC' is received
- 3 techniques for detecting erroes
	- Parity check
	- Checksumming
	- Cyclic redundancy checks

### Parity Check

<img src="/images/Pasted image 20251227192021.png" alt="image" width="500">

- Even parity scheme
	- Include an additional bit for $d + 1$ bits
	- If an odd number is found for even, or vice versa, a bit error has occurred
	- Errors are often clustered together in "bursts"


![[Pasted image 20251227192230.png]]

- 2-dimensional generalization of the single-bit parity scheme
- Parity value is computer for each row and for each column
- The parity of both column and row containing the flipped bit will be in error
- The ability of the receiver to both detect and correct errors is known as forward error correction (FEC)
	- Audio storage
	- Playback devices such as audio CDs
- FEC decreased the number of sender retransmissions

### Checksumming Methods

- $d$ bits of data are treated as a sequence of $k$-bits integers
- Sum integers and use the resulting sum as the error detection bits
- Internet checksum
	- Bytes of data are treated as 16-bit integers and summer
	- 1s complement of sum forms the checksum in the segment header
- Transport layer is implemented in software and needs fast error-detection
- Link layer is implemented in dedicated hardware in adapters, which can rapidly perform more complex CRC operations

### Cyclic Redundancy Check (CRC)

- Today's computer networks is based on cyclic redundancy check (CRC) code
- CRC codes are also known as polynomial code
	- View bit string to be send as a polynomial whose coefficients are the 0 and 1 values
- The sender and receiver must first agree on an $r + 1$ bit pattern, known as a generator
- For a given piece of data, D, the sender will choose r additional bits, R, and append them to D such that the resulting $d + r$ bit pattern is exactly divisible by G using modulo-2 arithmetic
- If the remainder is non-zero, the receiver knowns that an error has occurred
- Addition and subtraction are identical
	- Bitwise XOR operand

```c
1011 XOR 0101 = 1110
1001 XOR 1101 = 0100

1011 - 0101 = 1110
1001 - 1101 = 0100
```

- Multiplication and division are the same as in base-2 arithmetic, except that any required addition or subtraction is done without carries or borrows

![[Pasted image 20251227234753.png]]

![[Pasted image 20251227234826.png]]

- Each of the CRC standards can detect burst errors of fewer than $r+1$ bits

## Multiple Access Links and Protocols

- 2 types of network links
	- Point to point links
		- Single sender at one end of the link and a single receiver at the other end of the link
		- Point-to-point protocol (PPP)
		- High-level data link control (HDLC)
	- Broadcast links
		- Multiple sending and receiving nodes all connected to the same, single, shared broadcast channel
		- Ethernet
		- Wireless LANs
- Multiple access protocols

![[Pasted image 20251227235214.png]]

- More than two nodes can transmit frames at the same time
- All of the nodes receive multiple frames at the same time
	- Transmitted frames collide at all of the receivers
	- None of the nodes can receive the frames and are lost
- 3 categories of multiple access protocol
	- Channel partitioning protocols
	- Random access protocols
	- Taking turns protocol

Characteristics of Broadcast channel
1. When only one node has data to send, that node has a throughput of R bps
2. When M nodes have data to send, each node has a throughput of R/M bps
3. Protocol is decentralized
4. Protocol is simple

### Channel Partitioning Protocols

- Time-division multiplexing (TDM) and frequency-division multiplexing (FDM) are two techniques that can be used to partition a broadcast channel's bandwidth among all nodes sharing that channel
- TDM divides time into time frames and further divides each time frame into N time slots

![[Pasted image 20251227235700.png]]

- TDM eliminates collisions and is fair
	- Nodes is limited to an average rate of R/N bps even if its the only packet
	- Node must always wait for its turn in the transmission sequence
- FDM divides the R bps channel into different frequencies
	- Avoids collisions and divides the bandwidth fairly among the N nodes
	- A node is limited to a bandwidth of R/N

- Third channel partitioning protocol is code division multiple access (CDMA)
	- Assigns a different code to each node

### Random Access Protocols

- A transmitting node always transmits at the full rate of the channel, R bps
- When there is a collision, each node involved in the collision repeatedly retransmits its frame until its frame get through without a collision
- ALOHA protocols

**Slotted ALOHA**
- When there is a collision, node effectively tosses a biased coin to retransmit
- Allows a node to transmit continuously at the full rate, R
- Highly decentralized

![[Pasted image 20251228000316.png]]

- A slot in which exactly one node transmits is said to be a successful slot
- The efficiently of a slotted multiple access protocol is defined to be the long-run fraction of successful slots in the case when there are a large number of active nodes

**ALOHA**
- page 514

### Taking-Turns Protocols

### DOCSIS: The Link-Layer Protocol for Cable Internet Access

## Switched Local Area Networks

### Link-Layer Addressing and ARP

### Ethernet

### Link-Layer Switches

### Virtual Local Area Networks (VLANs)

## Link Virtualization: A Network as a Link Layer

### Multi-protocol Label Switching (MPLS)

## Data Centre Networking

### Retrospective: A Day in the Life of a Web Page Request

### Getting Started: DHCP, UDP, IP, and Ethernet

### Still Getting Started: Intra-Domain Routing to the DNS Server
### Still Getting Started: TCP and HTTP


## Summary