
- Network applications
	- Streaming video and VoIP
- Application deployment
	- TCP
	- UDP
- Socket interface
- Client-server applications

## Principles of Network Applications

### Network Application Architectures

- Network application development is writing programs that run on different end systems and communicate with each other over the network

<img src="/images/Pasted image 20251212182615.png" alt="image" width="500">

- From application development, the network architecture is fixed and provides a specific set of services to applications
- Application architecture is designed by the application developer and dictates how the application is structured

- 2 Methods
	- Client-server
	- Peer-to-peer architecture

- Client-server architecture
	- Server is an always on host that services requests from the clients
	- Web server
	- Clients do no directly communicate with each other
	- Server has a fixed address (IP)
	- A client can always contact server
	- FTP
	- Telnet
	- Email
	- Single-server host is incapable of keeping up will all requests

- Data centres house large number of hosts to hand requests

- P2P architecture
	- Minimal or no reliance on dedicated servers in data centres
	- Applications uses direct communication between pairs of intermittently connected hosts, called peers
	- Most of today's popular and traffic-intensive applications
	- File sharing
	- Self-scalability
		- Each peer also adds service capacity to the system by distributing files to other peers
	- Cost effective
	- Decentralized structure


<img src="/images/Pasted image 20251212183127.png" alt="image" width="500">



### Processing Communicating

- A process is a program that is running within an end system
- Communicate with each other with interprocess communication
- Processes communicate with exchanging messages

**Client and Server Processes**
- A process can be both a client and server
- Process that initiates the communication is labeled the client
- The process that waits to be contacted to begin the session is the server

**Interface Between the Process and the Computer Network**
- The network through a software interface is called a socket
- Application Programming Interface (API) is the socket interface between the application layer and transport layer
- Application developer has control of everything on the application layer side, but little control of transport-layer
	- Choice of transport protocol
	- Ability to fix a few transport-layer parameters such as maximum buffer and max segment sizes

<img src="/images/Pasted image 20251212183815.png" alt="image" width="500">

**Addressing Processes**
- 2 pieces of information
	- Address of host
	- Identifier that specifies the receiving process in destination host

- Host is identified by its IP address
	- 32-bit number that uniquely identifies host
- A destination port number is used to identify receiving process
- Web server is identified by port number 89
- Mail server (SMTP) uses port 25


### Transport Services Available to Applications

- Transport layer protocol is responsible for getting messages to the socket of the receiving process

**Reliable Data Transfer**
- A packet can overflow a buffer in a router
- Can be discarded by a host or router for corrupted bits
- Process-to-process reliable data transfer, passes data into the socket with complete confidence that data will arrive without errors
- Loss-tolerant applications, such as multimedia has some amount of data loss

**Throughput**

- Other sessions share the bandwidth along the network path, the available throughput can fluctuate with time
- If the transport protocol cannot provide throughput, application needs to encode at a lower rate or give up half of data
- Applications have requirements that are bandwidth-sensitive
- Elastic applications can make use of as much, or as little, throughput available

**Timing**
- A transport-layer protocol can also provide timing guarantees
- Real-time application
- Telephone
- Virtual environments
- Multiplayer games

**Security**
- A transport protocol can encrypt all data transmitted by the sending process
- Receiving host decrypts data
- Also provide confidentiality, including data integrity and end-point authentication

### Transport Services Provided by the Internet

<img src="/images/Pasted image 20251212185112.png" alt="image" width="500">


**TCP Services**
- The TCP service model includes a connection-oriented service and a reliable data transfer service
- Connection oriented service
	- Client and server transport layer control information before application level message flow
	- Handshaking allows to prepare for packet transfer
	- TCP connection exists between the sockets of the two processes
	- Full-duplex connection
		- Can send messages over the same connection at the same time
	- Application tears down connection when finished
- Reliable data transfer service
	- TCP delivers all data send without error and in proper order
- Congestion control mechanisms

**UDP Services**
- Lightweight transport protocol
- Minimal services
- Connectionless, no handshaking before processes communicate
- Unreliable data transfer service
- No guarantee for message arrival
- No congestion control mechanism

#### FOCUS ON SECURITY

- Neither TCP or UDP provides encryption
- Applications use secure sockets layer (SSL)
- TCP-enhanced-with-SSL provides critical process-to-process security
	- Encryption
	- Data integrity
	- End-point authentication
- SSL has its own socket API

**Services Not Provided by Internet Transport Protocols**
- TCP is primarily used because is provide reliable data transfer, and guaranteed delivery
- Phone use UDP, circumventing TCP congestion control mechanism and packet overheads
	- Use TCP as backup

<img src="/images/Pasted image 20251212185730.png" alt="image" width="500">

### Application-Layer Protocols

- An application layer protocol define how an application's processes, running on different end systems, pass messages to each other

Defines:
- Types of messages exchanged
- Syntax
- Semantics
- Rules for determining when and how a process sends messages and responds

- Some application layer protocols are specified in RFCs and are public domain
	- HTTP

### Network Applications Covered in This Book

- Applications
	- Web
	- Mail
	- Directory service video streaming
	- P2P

## The Web and HTTP

- The Web was the first internet application in the general public
- Web operates on demand
- Hyperlinks and search engines help to navigate

### Overview of HTTP

- HyperText Transfer Protocol (HTTP), the Web's application-layer protocol, is the heart of the Web
- Client and server program, execute on different end systems
	- Talk to each other by exchanging HTTP messages
- A Web page consists of objects
- An objects is simply a file that is addressable by a single URL
	- HTML
	- Images
	- Java applet
	- Video clip
	- Most web pages consist of a base HTML file and referenced objects

`http://www.google.com/images/picture.gif`

- Web browsers implement the client side of HTTP
- Web servers implement the server side of HTTP
	- Apache
	- Microsoft Internet Information Server
- HTTP uses TCP

<img src="/images/Pasted image 20251212190525.png" alt="image" width="500">

- Server sends requested files to client without storing any state information about the client
	- Server resends the objects
- HTTP is a stateless protocol
- A Web server is always on, with a fixed IP address

### Non-Persistent and Persistent Connections

- Non-persistent connections
	- Request-response pair over a separate TCP connection
- Persistent connections
	- Requests-response at the same time

- HTTP uses persistent connections in its default mode

**HTTP with Non-Persistent Connections**
- Base HTML with 10 image

1) HTTP client process initiates a TCP connection to the server on port 80
2) The HTTP client sends an HTTP request message to the server via its socket
	1) Request message include path name
3) HTTP server process receives the request message
	1) Retrieves the objects from storage, encapsulates it, and responds with a message to client
4) HTTP server tells TCP to close TCP connection
5) HTTP client receives the response message
	1) TCP connection terminates
6) First four steps are repeated for each references image object

- Browsers interpret the data differently
- HTTP specifications define only the communication protocol between the client and server
- Most browsers ope 5 to 10 parallel TCP connections, that handles one request-response transaction
- Round-trip time (RTT), is the time it takes for a small packet to travel from client to server and then back to client
- RTT
	- Packet-propagation delays
	- Packet queuing delays
	- Packet-processing delays
- To open a link there is a three-way handshake
	- Client sends a small TCP segment to the server
	- Server responds with a small TCP segment
	- Client acknowledges back to the server

<img src="/images/Pasted image 20251212192721.png" alt="image" width="500">

**HTTP with Persistent Connections**
- Non-persistent connections challenges
	- New connection is needed and maintained for each requested object
	- TCP buffers must be allocated
	- TCP variables must be kept in both client and server
	- Object suffers a delay delivery of 2 RTT
		- One to establish connection
		- One to request and receive an object
- Persistent connections, the server leaves the TCP connection open after sending a response
- Subsequent requests and responses can be send through the same connection
- Requests for objects can be made back-to-back, without replies
- HTTP server closes a connection when not used for a certain time
- Default mode of HTTP uses persistent connections with pipelining
- HTTP/2 builds on HTTP 1.1 allowing multiple requests and replies to be interleaved in the same connection

### HTTP Message Format

2 Types of HTTP Messages
- Request messages
- Response message

**HTTP Request Message**

```c
GET /dir/page.html HTTP/1.1
Host: www.google.com
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```

- Message is written in ASCII text
- First line is the request line
- Other lines are called the header lines
- 3 fields
	- Method field
		- GET
		- POST
		- HEAD
		- PUT
		- DELETE
	- URL field
	- HTTP version
- The header line specifies the host on which the object resides
- `close` tells the server that it is a non-persistent connection

<img src="/images/Pasted image 20251212193543.png" alt="image" width="500">


- `POST`
	- To send entity body with user entered form fields
- The `HEAD` method is similar to `GET` method
	- Responds with an HTTP message, but leaves out the requested object
	- Used for debugging
- `PUT` method is used in conjunction with Web publishing tools
	- Upload an object to a specific path
- `DELETE`
	- Allows a user, or an application, to delete an object

**HTTP Response Message**
```c
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-Type: text/html
(data data data data data ...)
```
- 3 sections
	- Status line
		- Protocol version v=field
		- Status code
		- Status message
	- 6 header lines
	- Entity body

Common Status Code
- `200 OK`
	- Request succeeded and the information is returned in the response
- `301 Moved Permanently`
	- Request object has been moves, at a different URL
- `400 Bad Request`
	- Generic error code
- `404 Not Found`
	- The requested document does not exist on this server
- `505 HTTP Version Not Supported`
	- Requested HTTP protocol version is not support by server


<img src="/images/Pasted image 20251212194056.png" alt="image" width="500">

- HTTP specification defines many more header lines
- A browser will generate header lines as a function of the browser type and version
	- The user configuration of the browser
	- Browser has a cached, out of date, version of the object


### User-Server Interaction: Cookies

- HTTP server is stateless
- Web servers handle simultaneous TCP connections
- HTTP uses cookies to identify users
- 4 components
	- Cookie header in the HTTP response message
	- Cookie header line in the HTTP request message
	- Cookie file kept on the user's end system and managed by browser
	- Back-end database at web site

- Amazon Web server will create a unique identification number in the back-end database that is indexed by the identification number
- Server responds to a browser, including the HTTP response with a `Set-cookie` header, that contains the identification number

![[Pasted image 20251212194632.png]]


### Web Caching

- A web cache also called a proxy server is a network entity that satisfies HTTP requests form the origin web server
- Contains a disk storage and keeps copies of recent requested objects

1) Browser established a TCP connection to the web cache and sends an HTTP request to the web cache
2) Web cache returns cached objects to client
3) If web cache does not have object, it opens a TCP connection to origin server
4) Web cache then stores a copy of the object to its local storage

- Web cache is purchased and installed by an ISP
- Reduces the response time for a client request
- Reduce traffic on an institution's access link to the internet
	- Improves performance for all applications

![[Pasted image 20251213163022.png]]

![[Pasted image 20251213163148.png]]


- The total response time, from request to object received, is the sum of the LAN delay, access delay, and internet delay
- Content Distribution Networks (CDNs), web caches are increasingly used in the internet
	- Installs distributed caches throughout the internet

**The Conditional GET**
- Caching introduces stale objects
- Conditional GET is a request message
	- GET method
	- Includes `If-Modified-Since` header line

- Cache performs an up-to-date check by issuing a conditional GET

```c
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
If-modified-since: Wed, 9 Sep 2015 09:23:24
```

- Header line is equal to the `Last-Modified` header line
- If the most updated, the server sends a message without the body
	- `304 Not Modified`


## Electronic Mail in the Internet

- User agents
	- Allows users to read, reply to, forward, save, and compose messages
	- Microsoft Outlook
	- Apple Mail
- Mail servers
	- Message is placed in an outgoing queue
- Simple Mail Transfer Protocol (SMTP)

![[Pasted image 20251213163856.png]]

- If the server cannot deliver mail to recipient, the sender's server holds the message in a message queue
- Reattempts are done every 30 minutes
- SMTP is the principal application-layer protocol for Internet electronic mail
- 

### SMTP

- Original SMTP RFC dates back to 1982
- Restricts the body of all mail messages to simple 7-but ASCII
- Binary multimedia data to be encoded to ASCII before being sent over SMTP
- TCP connection is a direct connection between the two servers

![[Pasted image 20251213234857.png]]

- SMTP has TCP establish a connection to port 25 at the server
- When connection is established, performs an application layer handshake
- Reliable data transfer

5 Commands
1) `HELO`
2) `MAIL FROM`
3) `RCPT TO`
4) `DATA`
5) `QUIT`

- Message ends with `CRLF.CRLF`
	- For carriage return and line feed
- SMTP uses persistent connections
	- Send messages over the same TCP
- Use Telnet to carry out a direct dialogue with an SMTP server

### Comparison with HTTP

- Both protocols are used to transfer files
- HTTP
	- Pull protocol
	- Loads information on a Web server
	- Users pull information from server
	- TCP is initiated by machine that wants to receive the file
	- Encapsulates each object in its owns HTTP response message
- SMTP
	- Push protocol
	- Sending mail server pushed file to receiving mail server
	- TCP connection is initiated by sender
	- Message's objects are put into one message

### Mail Message Formats

**Typical Message Header in SMTP**
```c
From: alice@crepes.fr
To: bob@hamburger.edu
Subject: Searching for the meaning of life.
```

### Mail Access Protocols

- A typical user runs a user agent on the local PC, but accesses the mailbox on an always-on shared mail server
- The sender's agent user pushes message into mail server
- Mail server uses SMTP to relay message to recipients mail server
- 

## DNS - The Internet's Directory Service

### Services Provided by DNS

### Overview of How DNS Works

### DNS Records and Message

## Peer-to-Peer Applications

### P2P File Distribution

## Video Streaming and Content Distribution Networks

### Internet Video
### HTTP Streaming and DASH

### Content Distribution Networks

### Case Studies: Netflix, YouTube, and Kankan

## Socket Programming: Creating Network Applications

### Socket Programming with UDP
### Socket Programming with TCP

## Summary

