- There is a piece of the network layer in each and every host and router in the network
- 2 parts of the network layer
	- Data plane
		- Per-router functions in the network layer that determine how a datagram arriving on one of the router's input links is forwarded to one of that router's output links
	- Control plane
		- The network wide logic that controls how a datagram is routed among routers along an end-to-end path from source host to the destination host
- Software defined networking (SDN) explicitly separates the data plane and control plane by implementing these control plane functions as a separate service

## Overview of Network Layer

![[Pasted image 20251219101556.png]]

- The primary data plane role of each router is to forward datagrams from its input links to its output links
- The primary role of the network control plane is to coordinate these local, per-router forwarding actions so that datagrams are ultimately transferred end-to-end, along paths of routers between source and destination hosts

### Forwarding and Routing: The Network Data and Control Planes

- Move packets from a sending host to a receiving host
	- Forwarding
		- Implemented in the data plane
		- A packet travelling to Host A to B
		- Packet may also be blocked from existing a router or duplicated and send over multiple outgoing links
	- Routing
		- Routing algorithms
		- Implemented in the control plane

- Forwarding refers to the router-local action of transferring a packet from an input link interface to the appropriate output link interface
	- Short timescales
	- Implemented in hardware
- Routing refers to the network-wide process that determines the end-to-end paths that packets take from source to destination
	- Longer timesvales
	- Implemented in software

- Forwarding table
	- A router forwards a packet by examining the value of one or more fields in the arriving packet's header
	- Uses these header values to index into its forwarding table
	- The stored values indicate the outgoing link

![[Pasted image 20251219102306.png]]

**Control Plane: The Traditional Approach**
- The routing algorithm determines the contents of the routers' forwarding tables
- The routing algorithm function in one router communicates with the routing algorithm function in other routers
- Exchanges messages containing routing information

**Control Plane: SDN Approach**
- A physically separate (from the routers), remote controller computes and distributes the forwarding tables for each router

![[Pasted image 20251219102606.png]]

- Linux OS code

### Network Service Models

- The network service model defines the characteristics o

## What's Inside a Router?

### Input Port Processing and Destination-Based Forwarding


### Switching

### Output Port Processing

### Where Does Queuing Occur?

### Packet Scheduling

## The Internet Protocol (IP): IPv4, Addressing, IPv6, and More

### IPv4 Datagram Format

### IPv4 Datagram Fragmentation

### IPv4 Addressing

### Networking Address Translation (NAT)

### IPv6

## Generalized Forwarding and SDN

### Match

### Action

### OpenFlow Examples of Match-plus-action in Action

## Summary